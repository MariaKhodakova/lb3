{"ast":null,"code":"var _jsxFileName = \"D:\\\\carousel\\\\react-carousel-main\\\\src\\\\components\\\\carousel-compound\\\\Carousel.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState, Children, cloneElement } from 'react';\nimport { FaChevronLeft, FaChevronRight } from 'react-icons/fa';\nimport Page from './Page';\nimport { CarouselContext } from './carousel-context';\nimport './Carousel.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TRANSITION_DURATION = 300;\nexport const Carousel = _ref => {\n  _s();\n  let {\n    children,\n    infinite\n  } = _ref;\n  const [offset, setOffset] = useState(0);\n  const [width, setWidth] = useState(450);\n  const [pages, setPages] = useState([]);\n  const [clonesCount, setClonesCount] = useState({\n    head: 0,\n    tail: 0\n  });\n  const [transitionDuration, setTransitionDuration] = useState(300);\n  const windowElRef = useRef();\n  useEffect(() => {\n    if (infinite) {\n      setPages([/*#__PURE__*/cloneElement(children[Children.count(children) - 1]),\n      // head: 1\n      ...children, /*#__PURE__*/cloneElement(children[0]) // tail: 1\n      ]);\n\n      setClonesCount({\n        head: 1,\n        tail: 1\n      });\n      return;\n    }\n    setPages(children);\n  }, [children, infinite]);\n  useEffect(() => {\n    const resizeHandler = () => {\n      const windowElWidth = windowElRef.current.offsetWidth;\n      console.log('resized', windowElWidth);\n      setWidth(windowElWidth);\n      setOffset(-(clonesCount.head * width)); // to prevent wrong offset\n    };\n\n    resizeHandler();\n    window.addEventListener('resize', resizeHandler);\n    return () => {\n      window.removeEventListener('resize', resizeHandler);\n    };\n  }, [clonesCount, width]);\n  useEffect(() => {\n    if (transitionDuration === 0) {\n      setTimeout(() => {\n        setTransitionDuration(TRANSITION_DURATION);\n      }, TRANSITION_DURATION);\n    }\n  }, [transitionDuration]);\n  useEffect(() => {\n    if (!infinite) return;\n\n    // с элемента 0 (clone) -> к предпоследнему (реальный)\n    if (offset === 0) {\n      setTimeout(() => {\n        setTransitionDuration(0);\n        setOffset(-(width * (pages.length - 1 - clonesCount.tail)));\n      }, TRANSITION_DURATION);\n      return;\n    }\n    // с элемента n (clone) -> к элементу 1 (реальный)\n    if (offset === -(width * (pages.length - 1))) {\n      setTimeout(() => {\n        setTransitionDuration(0);\n        setOffset(-(clonesCount.head * width));\n      }, TRANSITION_DURATION);\n      return;\n    }\n  }, [offset, infinite, pages, clonesCount, width]);\n  const handleLeftArrowClick = () => {\n    setOffset(currentOffset => {\n      const newOffset = currentOffset + width;\n      return Math.min(newOffset, 0);\n    });\n  };\n  const handleRightArrowClick = () => {\n    setOffset(currentOffset => {\n      const newOffset = currentOffset - width;\n      const maxOffset = -(width * (pages.length - 1));\n      return Math.max(newOffset, maxOffset);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(CarouselContext.Provider, {\n    value: {\n      width\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-container\",\n      children: [/*#__PURE__*/_jsxDEV(FaChevronLeft, {\n        className: \"arrow\",\n        onClick: handleLeftArrowClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"window\",\n        ref: windowElRef,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"all-pages-container\",\n          style: {\n            transform: `translateX(${offset}px)`,\n            transitionDuration: `${transitionDuration}ms`\n          },\n          children: pages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FaChevronRight, {\n        className: \"arrow\",\n        onClick: handleRightArrowClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_s(Carousel, \"ijDDO0Y+zdv8FjDV7RTlNYYTUtw=\");\n_c = Carousel;\nCarousel.Page = Page;\nvar _c;\n$RefreshReg$(_c, \"Carousel\");","map":{"version":3,"names":["useEffect","useRef","useState","Children","cloneElement","FaChevronLeft","FaChevronRight","Page","CarouselContext","jsxDEV","_jsxDEV","TRANSITION_DURATION","Carousel","_ref","_s","children","infinite","offset","setOffset","width","setWidth","pages","setPages","clonesCount","setClonesCount","head","tail","transitionDuration","setTransitionDuration","windowElRef","count","resizeHandler","windowElWidth","current","offsetWidth","console","log","window","addEventListener","removeEventListener","setTimeout","length","handleLeftArrowClick","currentOffset","newOffset","Math","min","handleRightArrowClick","maxOffset","max","Provider","value","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","style","transform","_c","$RefreshReg$"],"sources":["D:/carousel/react-carousel-main/src/components/carousel-compound/Carousel.js"],"sourcesContent":["import { useEffect, useRef, useState, Children, cloneElement } from 'react'\nimport { FaChevronLeft, FaChevronRight } from 'react-icons/fa'\nimport Page from './Page'\nimport { CarouselContext } from './carousel-context'\nimport './Carousel.css'\n\nconst TRANSITION_DURATION = 300\n\nexport const Carousel = ({ children, infinite }) => {\n  const [offset, setOffset] = useState(0)\n  const [width, setWidth] = useState(450)\n  const [pages, setPages] = useState([])\n  const [clonesCount, setClonesCount] = useState({ head: 0, tail: 0 })\n  const [transitionDuration, setTransitionDuration] = useState(300)\n\n  const windowElRef = useRef()\n\n  useEffect(() => {\n    if (infinite) {\n      setPages([\n        cloneElement(children[Children.count(children) - 1]), // head: 1\n        ...children,\n        cloneElement(children[0]), // tail: 1\n      ])\n      setClonesCount({ head: 1, tail: 1 })\n      return\n    }\n    setPages(children)\n  }, [children, infinite])\n\n  useEffect(() => {\n    const resizeHandler = () => {\n      const windowElWidth = windowElRef.current.offsetWidth\n      console.log('resized', windowElWidth)\n      setWidth(windowElWidth)\n      setOffset(-(clonesCount.head * width)) // to prevent wrong offset\n    }\n\n    resizeHandler()\n    window.addEventListener('resize', resizeHandler)\n\n    return () => {\n      window.removeEventListener('resize', resizeHandler)\n    }\n  }, [clonesCount, width])\n\n  useEffect(() => {\n    if (transitionDuration === 0) {\n      setTimeout(() => {\n        setTransitionDuration(TRANSITION_DURATION)\n      }, TRANSITION_DURATION)\n    }\n  }, [transitionDuration])\n\n  useEffect(() => {\n    if (!infinite) return\n\n    // с элемента 0 (clone) -> к предпоследнему (реальный)\n    if (offset === 0) {\n      setTimeout(() => {\n        setTransitionDuration(0)\n        setOffset(-(width * (pages.length - 1 - clonesCount.tail)))\n      }, TRANSITION_DURATION)\n      return\n    }\n    // с элемента n (clone) -> к элементу 1 (реальный)\n    if (offset === -(width * (pages.length - 1))) {\n      setTimeout(() => {\n        setTransitionDuration(0)\n        setOffset(-(clonesCount.head * width))\n      }, TRANSITION_DURATION)\n      return\n    }\n  }, [offset, infinite, pages, clonesCount, width])\n\n  const handleLeftArrowClick = () => {\n    setOffset((currentOffset) => {\n      const newOffset = currentOffset + width\n      return Math.min(newOffset, 0)\n    })\n  }\n  const handleRightArrowClick = () => {\n    setOffset((currentOffset) => {\n      const newOffset = currentOffset - width\n      const maxOffset = -(width * (pages.length - 1))\n      return Math.max(newOffset, maxOffset)\n    })\n  }\n\n  return (\n    <CarouselContext.Provider value={{ width }}>\n      <div className=\"main-container\">\n        <FaChevronLeft className=\"arrow\" onClick={handleLeftArrowClick} />\n        <div className=\"window\" ref={windowElRef}>\n          <div\n            className=\"all-pages-container\"\n            style={{\n              transform: `translateX(${offset}px)`,\n              transitionDuration: `${transitionDuration}ms`,\n            }}\n          >\n            {pages}\n          </div>\n        </div>\n        <FaChevronRight className=\"arrow\" onClick={handleRightArrowClick} />\n      </div>\n    </CarouselContext.Provider>\n  )\n}\n\nCarousel.Page = Page\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,YAAY,QAAQ,OAAO;AAC3E,SAASC,aAAa,EAAEC,cAAc,QAAQ,gBAAgB;AAC9D,OAAOC,IAAI,MAAM,QAAQ;AACzB,SAASC,eAAe,QAAQ,oBAAoB;AACpD,OAAO,gBAAgB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEvB,MAAMC,mBAAmB,GAAG,GAAG;AAE/B,OAAO,MAAMC,QAAQ,GAAGC,IAAA,IAA4B;EAAAC,EAAA;EAAA,IAA3B;IAAEC,QAAQ;IAAEC;EAAS,CAAC,GAAAH,IAAA;EAC7C,MAAM,CAACI,MAAM,EAAEC,SAAS,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC;EACvC,MAAM,CAACiB,KAAK,EAAEC,QAAQ,CAAC,GAAGlB,QAAQ,CAAC,GAAG,CAAC;EACvC,MAAM,CAACmB,KAAK,EAAEC,QAAQ,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACqB,WAAW,EAAEC,cAAc,CAAC,GAAGtB,QAAQ,CAAC;IAAEuB,IAAI,EAAE,CAAC;IAAEC,IAAI,EAAE;EAAE,CAAC,CAAC;EACpE,MAAM,CAACC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG1B,QAAQ,CAAC,GAAG,CAAC;EAEjE,MAAM2B,WAAW,GAAG5B,MAAM,EAAE;EAE5BD,SAAS,CAAC,MAAM;IACd,IAAIgB,QAAQ,EAAE;MACZM,QAAQ,CAAC,cACPlB,YAAY,CAACW,QAAQ,CAACZ,QAAQ,CAAC2B,KAAK,CAACf,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;MAAE;MACtD,GAAGA,QAAQ,eACXX,YAAY,CAACW,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAE;MAAA,CAC5B,CAAC;;MACFS,cAAc,CAAC;QAAEC,IAAI,EAAE,CAAC;QAAEC,IAAI,EAAE;MAAE,CAAC,CAAC;MACpC;IACF;IACAJ,QAAQ,CAACP,QAAQ,CAAC;EACpB,CAAC,EAAE,CAACA,QAAQ,EAAEC,QAAQ,CAAC,CAAC;EAExBhB,SAAS,CAAC,MAAM;IACd,MAAM+B,aAAa,GAAGA,CAAA,KAAM;MAC1B,MAAMC,aAAa,GAAGH,WAAW,CAACI,OAAO,CAACC,WAAW;MACrDC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEJ,aAAa,CAAC;MACrCZ,QAAQ,CAACY,aAAa,CAAC;MACvBd,SAAS,CAAC,EAAEK,WAAW,CAACE,IAAI,GAAGN,KAAK,CAAC,CAAC,EAAC;IACzC,CAAC;;IAEDY,aAAa,EAAE;IACfM,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEP,aAAa,CAAC;IAEhD,OAAO,MAAM;MACXM,MAAM,CAACE,mBAAmB,CAAC,QAAQ,EAAER,aAAa,CAAC;IACrD,CAAC;EACH,CAAC,EAAE,CAACR,WAAW,EAAEJ,KAAK,CAAC,CAAC;EAExBnB,SAAS,CAAC,MAAM;IACd,IAAI2B,kBAAkB,KAAK,CAAC,EAAE;MAC5Ba,UAAU,CAAC,MAAM;QACfZ,qBAAqB,CAACjB,mBAAmB,CAAC;MAC5C,CAAC,EAAEA,mBAAmB,CAAC;IACzB;EACF,CAAC,EAAE,CAACgB,kBAAkB,CAAC,CAAC;EAExB3B,SAAS,CAAC,MAAM;IACd,IAAI,CAACgB,QAAQ,EAAE;;IAEf;IACA,IAAIC,MAAM,KAAK,CAAC,EAAE;MAChBuB,UAAU,CAAC,MAAM;QACfZ,qBAAqB,CAAC,CAAC,CAAC;QACxBV,SAAS,CAAC,EAAEC,KAAK,IAAIE,KAAK,CAACoB,MAAM,GAAG,CAAC,GAAGlB,WAAW,CAACG,IAAI,CAAC,CAAC,CAAC;MAC7D,CAAC,EAAEf,mBAAmB,CAAC;MACvB;IACF;IACA;IACA,IAAIM,MAAM,KAAK,EAAEE,KAAK,IAAIE,KAAK,CAACoB,MAAM,GAAG,CAAC,CAAC,CAAC,EAAE;MAC5CD,UAAU,CAAC,MAAM;QACfZ,qBAAqB,CAAC,CAAC,CAAC;QACxBV,SAAS,CAAC,EAAEK,WAAW,CAACE,IAAI,GAAGN,KAAK,CAAC,CAAC;MACxC,CAAC,EAAER,mBAAmB,CAAC;MACvB;IACF;EACF,CAAC,EAAE,CAACM,MAAM,EAAED,QAAQ,EAAEK,KAAK,EAAEE,WAAW,EAAEJ,KAAK,CAAC,CAAC;EAEjD,MAAMuB,oBAAoB,GAAGA,CAAA,KAAM;IACjCxB,SAAS,CAAEyB,aAAa,IAAK;MAC3B,MAAMC,SAAS,GAAGD,aAAa,GAAGxB,KAAK;MACvC,OAAO0B,IAAI,CAACC,GAAG,CAACF,SAAS,EAAE,CAAC,CAAC;IAC/B,CAAC,CAAC;EACJ,CAAC;EACD,MAAMG,qBAAqB,GAAGA,CAAA,KAAM;IAClC7B,SAAS,CAAEyB,aAAa,IAAK;MAC3B,MAAMC,SAAS,GAAGD,aAAa,GAAGxB,KAAK;MACvC,MAAM6B,SAAS,GAAG,EAAE7B,KAAK,IAAIE,KAAK,CAACoB,MAAM,GAAG,CAAC,CAAC,CAAC;MAC/C,OAAOI,IAAI,CAACI,GAAG,CAACL,SAAS,EAAEI,SAAS,CAAC;IACvC,CAAC,CAAC;EACJ,CAAC;EAED,oBACEtC,OAAA,CAACF,eAAe,CAAC0C,QAAQ;IAACC,KAAK,EAAE;MAAEhC;IAAM,CAAE;IAAAJ,QAAA,eACzCL,OAAA;MAAK0C,SAAS,EAAC,gBAAgB;MAAArC,QAAA,gBAC7BL,OAAA,CAACL,aAAa;QAAC+C,SAAS,EAAC,OAAO;QAACC,OAAO,EAAEX;MAAqB;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG,eAClE/C,OAAA;QAAK0C,SAAS,EAAC,QAAQ;QAACM,GAAG,EAAE7B,WAAY;QAAAd,QAAA,eACvCL,OAAA;UACE0C,SAAS,EAAC,qBAAqB;UAC/BO,KAAK,EAAE;YACLC,SAAS,EAAG,cAAa3C,MAAO,KAAI;YACpCU,kBAAkB,EAAG,GAAEA,kBAAmB;UAC5C,CAAE;UAAAZ,QAAA,EAEDM;QAAK;UAAAiC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MACF;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACF,eACN/C,OAAA,CAACJ,cAAc;QAAC8C,SAAS,EAAC,OAAO;QAACC,OAAO,EAAEN;MAAsB;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAChE;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACmB;AAE/B,CAAC;AAAA3C,EAAA,CApGYF,QAAQ;AAAAiD,EAAA,GAARjD,QAAQ;AAsGrBA,QAAQ,CAACL,IAAI,GAAGA,IAAI;AAAA,IAAAsD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}